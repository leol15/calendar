(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{11299:()=>{},80527:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ea});var i=n(95155),a=n(5459),s=n(12115),r=n(34540),l=n(20935),d=n(67371),o=n(45132),c=n(40947),v=n(28538),u=n(14408),h=n(5058),p=n(2395),m=n(51990),E=n(78966),y=n.n(E),j=n(32813),x=n.n(j),g=n(70954),A=n.n(g),f=function(e){return e.Monday="Monday",e.Tuesday="Tuesday",e.Wednesday="Wednesday",e.Thursday="Thursday",e.Friday="Friday",e.Saturday="Saturday",e.Sunday="Sunday",e}({});let S="schedule-events",b=e=>{let[t,n,i,a=255]=e;return"rgba(".concat(t,", ").concat(n,", ").concat(i,", ").concat(a,")")},k={toString:e=>{let t=Math.floor((e%=1440)/60),n=e%60,i=String(t).padStart(2,"0"),a=String(n).padStart(2,"0");return"".concat(i,":").concat(a)},fromString:e=>{let[t,n]=e.split(":").map(Number);return 60*(t||0)+(n||0)}},N={serialize:e=>JSON.stringify(e),deserialize:e=>{try{return JSON.parse(e)}catch(e){return console.error("Error deserializing events:",e),[]}}},C=e=>{window.localStorage.setItem(S,N.serialize(e))},w=()=>{var e;return N.deserialize((null==(e=window)?void 0:e.localStorage.getItem(S))||"[]")},z=()=>{let e=w(),t=N.serialize(e);navigator.clipboard.writeText(t)},B=async()=>{let e=await navigator.clipboard.readText();try{let t=N.deserialize(e);C(t)}catch(e){console.error("Error pasting events:",e)}},I=(0,m.Z0)({name:"weekEvents",initialState:{eventsById:{},ids:[]},reducers:{upsertEvent:(e,t)=>{e.eventsById[t.payload.id]=t.payload,e.ids.includes(t.payload.id)||(e.ids.push(t.payload.id),e.ids.sort((e,t)=>e-t)),C(Object.values(e.eventsById))},removeEvent:(e,t)=>{e.eventsById=A()(e.eventsById,t.payload),e.ids=e.ids.filter(e=>e!==t.payload),C(Object.values(e.eventsById))},clearEvents:e=>{e.eventsById={},e.ids=[],C(Object.values(e.eventsById))},reloadFromLocalStorage:e=>{let t=w();e.eventsById={},e.ids=[],t.forEach(t=>{e.eventsById[t.id]=t,e.ids.push(t.id)}),e.ids.sort((e,t)=>e-t)}}}),{upsertEvent:M,removeEvent:O,clearEvents:D,reloadFromLocalStorage:T}=I.actions,_={createEvent:e=>(t,n)=>{let i=n(),a=(i.weekEvents.ids[i.weekEvents.ids.length-1]||0)+1,s={id:0,name:"New event ".concat(a),days:[f.Monday],start:0,duration:60},r=x()({},s,e,{id:a});return t(M(r)),r},upsertEvent:M,removeEvent:O,reloadFromLocalStorage:T},F=I.reducer,P={eventsByDay:(e,t)=>Object.values(e.eventsById).filter(e=>e.days.includes(t))},W=(0,m.Z0)({name:"editEvent",initialState:{isEditing:!1,event:null},reducers:{startEditEvent:(e,t)=>{e.isEditing=!0,e.event=y()(t.payload)},updateEvent:(e,t)=>{e.isEditing&&(e.event=t.payload)},endEditEvent:e=>{e.isEditing=!1,e.event=null}}}),Y=W.reducer,Z={startEditEvent:e=>(t,n)=>{let i=n().weekEvents.eventsById[e];i&&t(W.actions.startEditEvent(i))},updateEditEvent:W.actions.updateEvent,cancelEditEvent:()=>e=>{e(W.actions.endEditEvent())},saveEditEvent:()=>(e,t)=>{let n=t();n.editEvent.event&&e(_.upsertEvent(n.editEvent.event)),e(W.actions.endEditEvent())},deleteEvent:()=>(e,t)=>{let n=t();n.editEvent.event&&e(_.removeEvent(n.editEvent.event.id)),e(W.actions.endEditEvent())}},J={isEditing:e=>e.editEvent.isEditing,event:e=>e.editEvent.event},L=()=>{let e=(0,r.wA)(),t=(0,r.d4)(J.isEditing),n=(0,r.d4)(J.event),[a,m]=(0,s.useState)(k.toString((null==n?void 0:n.start)||0));(0,s.useEffect)(()=>{t&&n&&m(k.toString(n.start))},[t]);let E=()=>{e(Z.cancelEditEvent())},y=t=>{let i=Object.assign({},n,t);e(Z.updateEditEvent(i))};return t&&n?(0,i.jsx)(l.A,{visible:t,onDismiss:e=>"closeButton"===e.detail.reason&&E(),size:"medium",footer:(0,i.jsxs)(d.A,{display:"block",children:[(0,i.jsx)(d.A,{float:"left",textAlign:"left",children:(0,i.jsx)(o.A,{variant:"normal",onClick:()=>{e(Z.deleteEvent())},children:"Delete"})}),(0,i.jsxs)(d.A,{float:"right",children:[(0,i.jsx)(o.A,{variant:"link",onClick:E,children:"Cancel"}),(0,i.jsx)(o.A,{disabled:!(e=>!!e&&!!e.name&&!isNaN(e.start)&&!isNaN(e.duration)&&e.duration>0&&e.days.length>0)(n),variant:"primary",onClick:()=>{e(Z.saveEditEvent())},children:"Save"})]})]}),header:"Editing ".concat(null==n?void 0:n.id),children:(0,i.jsx)(c.A,{children:(0,i.jsxs)(v.A,{direction:"vertical",size:"l",children:[(0,i.jsx)(u.A,{label:"Name",children:(0,i.jsx)(h.A,{value:n.name,placeholder:n.name,invalid:!n.name,onChange:e=>y({name:e.detail.value})})}),(0,i.jsx)(u.A,{label:"Description",children:(0,i.jsx)(h.A,{type:"url",value:(null==n?void 0:n.description)||"",placeholder:null==n?void 0:n.description,onChange:e=>y({description:e.detail.value})})}),(0,i.jsx)(u.A,{label:"Days of week (".concat(n.days.length,")"),children:(0,i.jsx)("div",{style:{},children:(0,i.jsx)(v.A,{direction:"horizontal",size:"xxxs",children:Object.values(f).map(e=>(0,i.jsx)(o.A,{variant:n.days.includes(e)?"normal":"link",onClick:()=>{y({days:n.days.includes(e)?n.days.filter(t=>t!==e):[...n.days,e]})},children:(0,i.jsx)("span",{style:{fontSize:"0.6rem",fontFamily:"monospace"},children:e.slice(0,1)})},e))})})}),(0,i.jsxs)(v.A,{direction:"horizontal",size:"xs",children:[(0,i.jsx)(u.A,{label:"Start time",stretch:!1,children:(0,i.jsx)(p.A,{onChange:e=>{let{detail:t}=e;m(t.value),y({start:k.fromString(t.value)})},value:a,format:"hh:mm",placeholder:"hh:mm"})}),(0,i.jsx)(u.A,{label:"End time",children:(0,i.jsx)(p.A,{disabled:!0,value:k.toString(k.fromString(a)+n.duration),format:"hh:mm",placeholder:"hh:mm"})}),(0,i.jsx)(u.A,{label:"Duration (minutes)",children:(0,i.jsx)(h.A,{type:"number",value:String(n.duration),placeholder:n.duration.toString(),onChange:e=>{let t=parseInt(e.detail.value);!isNaN(t)&&t>0&&y({duration:t})}})})]})]})})}):null};var U=n(83761),q=n(578),K=n(48860),V=n(5751),G=n(18940),H=n.n(G);let Q=(0,m.Z0)({name:"editEvent",initialState:{inprograss:!1,event:null},reducers:{start:(e,t)=>{e.inprograss=!0,e.event=y()(t.payload)},endEditEvent:e=>{e.inprograss=!1,e.event=null}}}),R=Q.reducer,X={start:()=>e=>{let t=e(_.createEvent({}));e(Q.actions.start(t))}},$=e=>{let{event:t}=e,n=(0,r.wA)(),a=[...function(e){let t=0;if(!e||0===e.length)return[0,0,0];for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return[t>>16&255,t>>8&255,255&t]}(t.name),.9],s=function(e){let[t,n,i,a=1]=e;return .299*Math.round((t/255*a+ +(1-a))*255)+.587*Math.round((n/255*a+ +(1-a))*255)+.114*Math.round((i/255*a+ +(1-a))*255)>186?[0,0,0]:[255,255,255]}(a);return(0,i.jsxs)("div",{className:"event",style:{backgroundColor:b(a)},onClick:()=>{console.log("event clicked",t.id),n(Z.startEditEvent(t.id))},children:[(0,i.jsx)("p",{className:"event-name",style:{color:b(s)},children:t.name}),(0,i.jsx)("p",{children:t.description})]})},ee=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],et=e=>{let{day:t}=e,n=(0,r.d4)(e=>P.eventsByDay(e.weekEvents,t)),a=e=>{let t=e.start/1440,n=e.duration/1440;return{top:"".concat(100*t,"%"),height:"".concat(100*n,"%")}};return(0,i.jsx)("div",{className:"day",children:(0,i.jsxs)("div",{className:"hour-container",children:[ee.map((e,t)=>(0,i.jsx)("div",{className:"hour",children:(0,i.jsx)("span",{children:e})},t)),n.map((e,t)=>(0,i.jsx)("div",{className:"event-position-container",style:a(e),children:(0,i.jsx)($,{event:e})},t))]})})};function en(){let[e,t]=(0,s.useState)(!1),[n,a]=(0,s.useState)(!1),l=(0,r.wA)(),d=async()=>{B().then(()=>l(_.reloadFromLocalStorage()))};return(0,i.jsxs)("div",{children:[(0,i.jsx)(U.A,{variant:"gen-ai"}),(0,i.jsxs)(v.A,{direction:"horizontal",size:"l",children:[(0,i.jsx)("h3",{children:"Calandar"}),(0,i.jsx)(q.A,{onChange:()=>a(!n),pressed:n,iconName:"lock-private",pressedIconName:"unlocked",children:"Edit"}),(0,i.jsx)(K.A,{dismissButton:!1,position:"top",size:"small",triggerType:"custom",content:(0,i.jsx)(V.A,{type:"success",children:"Copied to clipboard"}),children:(0,i.jsx)(o.A,{iconName:"copy",onClick:z,children:"Copy Calandar"})}),(0,i.jsx)(K.A,{dismissButton:!1,position:"top",size:"small",triggerType:"custom",content:(0,i.jsx)(V.A,{type:"success",children:"Pasted from clipboard"}),children:(0,i.jsx)(o.A,{iconName:"upload",onClick:d,children:"Paste Calandar"})})]}),(0,i.jsxs)("div",{style:{cursor:n?"crosshair":""},className:"week-container",onMouseDown:e=>{n&&(t(!0),console.log("mouse down",e.clientY),l(X.start()))},onMouseMove:t=>{e&&console.log("mouse move",t.clientY)},onMouseUp:n=>{e&&(t(!1),console.log("mouse up",n.clientY))},children:[(0,i.jsx)("div",{className:"left-hour-marker",children:H()(24).map(e=>(0,i.jsxs)("div",{className:"hour-marker",children:[e,":00"]},e))}),Object.values(f).map((e,t)=>(0,i.jsx)(et,{day:e},t))]})]})}n(11299);let ei=(0,m.U1)({reducer:{weekEvents:F,editEvent:Y,dragCreateEvent:R}});function ea(){return(0,s.useEffect)(()=>{(0,a.pW)(a.Vd.Compact),w().forEach(e=>{ei.dispatch(_.upsertEvent(e))})},[]),(0,i.jsx)(r.Kq,{store:ei,children:(0,i.jsxs)("div",{children:[(0,i.jsx)(L,{}),(0,i.jsx)(en,{})]})})}},95946:(e,t,n)=>{Promise.resolve().then(n.bind(n,80527))}},e=>{var t=t=>e(e.s=t);e.O(0,[936,13,145,984,634,772,441,684,358],()=>t(95946)),_N_E=e.O()}]);