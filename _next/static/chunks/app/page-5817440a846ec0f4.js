(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{11299:()=>{},80527:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>es});var a=n(95155),i=n(5459),r=n(12115),s=n(34540),l=n(20935),d=n(67371),o=n(45132),c=n(40947),v=n(28538),u=n(14408),h=n(5058),E=n(2395),p=n(51990),g=n(78966),y=n.n(g),m=n(32813),j=n.n(m),x=n(70954),f=n.n(x),b=function(e){return e.Monday="Monday",e.Tuesday="Tuesday",e.Wednesday="Wednesday",e.Thursday="Thursday",e.Friday="Friday",e.Saturday="Saturday",e.Sunday="Sunday",e}({});let A="schedule-events",S=e=>{let[t,n,a,i=255]=e;return"rgba(".concat(t,", ").concat(n,", ").concat(a,", ").concat(i,")")},C={toString:e=>{let t=Math.floor((e%=1440)/60),n=e%60,a=String(t).padStart(2,"0"),i=String(n).padStart(2,"0");return"".concat(a,":").concat(i)},fromString:e=>{let[t,n]=e.split(":").map(Number);return 60*(t||0)+(n||0)}},k={serialize:e=>JSON.stringify(e),deserialize:e=>{try{return JSON.parse(e)}catch(e){return console.error("Error deserializing events:",e),[]}}},N=e=>{window.localStorage.setItem(A,k.serialize(e))},w=()=>{var e;return k.deserialize((null==(e=window)?void 0:e.localStorage.getItem(A))||"[]")},z=()=>{let e=w(),t=k.serialize(e);navigator.clipboard.writeText(t)},B=async()=>{let e=await navigator.clipboard.readText();try{let t=k.deserialize(e);N(t)}catch(e){console.error("Error pasting events:",e)}},I=(0,p.Z0)({name:"weekEvents",initialState:{eventsById:{},ids:[]},reducers:{upsertEvent:(e,t)=>{e.eventsById[t.payload.id]=t.payload,e.ids.includes(t.payload.id)||(e.ids.push(t.payload.id),e.ids.sort((e,t)=>e-t)),N(Object.values(e.eventsById))},removeEvent:(e,t)=>{e.eventsById=f()(e.eventsById,t.payload),e.ids=e.ids.filter(e=>e!==t.payload),N(Object.values(e.eventsById))},clearEvents:e=>{e.eventsById={},e.ids=[],N(Object.values(e.eventsById))},reloadFromLocalStorage:e=>{let t=w();e.eventsById={},e.ids=[],t.forEach(t=>{e.eventsById[t.id]=t,e.ids.push(t.id)}),e.ids.sort((e,t)=>e-t)}}}),{upsertEvent:M,removeEvent:O,clearEvents:D,reloadFromLocalStorage:T}=I.actions,H={createEvent:e=>(t,n)=>{let a=n(),i=(a.weekEvents.ids[a.weekEvents.ids.length-1]||0)+1,r={id:0,name:"New event ".concat(i),days:[b.Monday],start:0,duration:60},s=j()({},r,e,{id:i});return console.log("leoooo createEvent",e,s),t(M(s)),s},upsertEvent:M,removeEvent:O,reloadFromLocalStorage:T},_=I.reducer,F={eventsByDay:(e,t)=>Object.values(e.eventsById).filter(e=>e.days.includes(t))},Y=(0,p.Z0)({name:"editEvent",initialState:{isEditing:!1,event:null},reducers:{startEditEvent:(e,t)=>{e.isEditing||(e.isEditing=!0,e.event=y()(t.payload))},updateEvent:(e,t)=>{e.isEditing&&(e.event=t.payload)},endEditEvent:e=>{e.isEditing=!1,e.event=null}}}),P=Y.reducer,W={startEditEvent:e=>(t,n)=>{let a=n().weekEvents.eventsById[e];a&&t(Y.actions.startEditEvent(a))},updateEditEvent:Y.actions.updateEvent,cancelEditEvent:()=>e=>{e(Y.actions.endEditEvent())},saveEditEvent:()=>(e,t)=>{let n=t();n.editEvent.event&&e(H.upsertEvent(n.editEvent.event)),e(Y.actions.endEditEvent())},deleteEvent:()=>(e,t)=>{let n=t();n.editEvent.event&&e(H.removeEvent(n.editEvent.event.id)),e(Y.actions.endEditEvent())}},Z={isEditing:e=>e.editEvent.isEditing,event:e=>e.editEvent.event},J=()=>{let e=(0,s.wA)(),t=(0,s.d4)(Z.isEditing),n=(0,s.d4)(Z.event),[i,p]=(0,r.useState)(C.toString((null==n?void 0:n.start)||0));(0,r.useEffect)(()=>{t&&n&&p(C.toString(n.start))},[t]);let g=()=>{e(W.cancelEditEvent())},y=t=>{let a=Object.assign({},n,t);e(W.updateEditEvent(a))};return t&&n?(0,a.jsx)(l.A,{visible:t,onDismiss:e=>"closeButton"===e.detail.reason&&g(),size:"medium",footer:(0,a.jsxs)(d.A,{display:"block",children:[(0,a.jsx)(d.A,{float:"left",textAlign:"left",children:(0,a.jsx)(o.A,{variant:"normal",onClick:()=>{e(W.deleteEvent())},children:"Delete"})}),(0,a.jsxs)(d.A,{float:"right",children:[(0,a.jsx)(o.A,{variant:"link",onClick:g,children:"Cancel"}),(0,a.jsx)(o.A,{disabled:!(e=>!!e&&!!e.name&&!isNaN(e.start)&&!isNaN(e.duration)&&e.duration>0&&e.days.length>0)(n),variant:"primary",onClick:()=>{e(W.saveEditEvent())},children:"Save"})]})]}),header:"Editing ".concat(null==n?void 0:n.id),children:(0,a.jsx)(c.A,{children:(0,a.jsxs)(v.A,{direction:"vertical",size:"l",children:[(0,a.jsx)(u.A,{label:"Name",children:(0,a.jsx)(h.A,{value:n.name,placeholder:n.name,invalid:!n.name,onChange:e=>y({name:e.detail.value})})}),(0,a.jsx)(u.A,{label:"Description",children:(0,a.jsx)(h.A,{type:"url",value:(null==n?void 0:n.description)||"",placeholder:null==n?void 0:n.description,onChange:e=>y({description:e.detail.value})})}),(0,a.jsx)(u.A,{label:"Days of week (".concat(n.days.length,")"),children:(0,a.jsx)("div",{style:{},children:(0,a.jsx)(v.A,{direction:"horizontal",size:"xxxs",children:Object.values(b).map(e=>(0,a.jsx)(o.A,{variant:n.days.includes(e)?"normal":"link",onClick:()=>{y({days:n.days.includes(e)?n.days.filter(t=>t!==e):[...n.days,e]})},children:(0,a.jsx)("span",{style:{fontSize:"0.6rem",fontFamily:"monospace"},children:e.slice(0,1)})},e))})})}),(0,a.jsxs)(v.A,{direction:"horizontal",size:"xs",children:[(0,a.jsx)(u.A,{label:"Start time",stretch:!1,children:(0,a.jsx)(E.A,{onChange:e=>{let{detail:t}=e;p(t.value),y({start:C.fromString(t.value)})},value:i,format:"hh:mm",placeholder:"hh:mm"})}),(0,a.jsx)(u.A,{label:"End time",children:(0,a.jsx)(E.A,{disabled:!0,value:C.toString(C.fromString(i)+n.duration),format:"hh:mm",placeholder:"hh:mm"})}),(0,a.jsx)(u.A,{label:"Duration (minutes)",children:(0,a.jsx)(h.A,{type:"number",value:String(n.duration),placeholder:n.duration.toString(),onChange:e=>{let t=parseInt(e.detail.value);!isNaN(t)&&t>0&&y({duration:t})}})})]})]})})}):null};var L=n(83761),R=n(578),U=n(48860),q=n(5751),K=n(18940),V=n.n(K),G=n(59882),Q=n.n(G);let X=(0,p.Z0)({name:"editEvent",initialState:{inprograss:!1,event:null,enabled:!1,containerHeight:null,yStart:0},reducers:{dragCreateEventStart:(e,t)=>{e.inprograss=!0,e.event=y()(t.payload.e),e.containerHeight=t.payload.height,e.yStart=t.payload.yStart},endEditEvent:e=>{e.inprograss=!1,e.event=null},toggleEnabled:(e,t)=>{e.enabled=Q()(t.payload)?!e.enabled:t.payload}}}),$=X.reducer,ee={start:(e,t,n,a,i)=>(r,s)=>{if(!s().dragCreateEvent.enabled)return;let l=i-a,d=i-l;console.log("leooo clientY clientY2",a,d);let o=15*Math.floor(Math.floor((d-t)/n*1440)/15),c=r(H.createEvent({days:[e],start:o}));r(X.actions.dragCreateEventStart({e:c,height:n,yStart:i}))},move:e=>(t,n)=>{let a=n().dragCreateEvent,i=a.event;if(!a.enabled||!a.inprograss||!i||!a.containerHeight)return;let r=15*Math.floor(Math.floor(Math.abs(e-a.yStart)/a.containerHeight*1440)/15);t(H.upsertEvent({...i,duration:r}))},end:()=>(e,t)=>{let n=t().dragCreateEvent,a=n.event;n.enabled&&n.inprograss&&a&&(e(X.actions.endEditEvent()),e(W.startEditEvent(a.id)))},toggleEnabled:X.actions.toggleEnabled},et={enabled:e=>e.dragCreateEvent.enabled},en=e=>{let{event:t}=e,n=(0,s.wA)(),i=[...function(e){let t=0;if(!e||0===e.length)return[0,0,0];for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return[t>>16&255,t>>8&255,255&t]}(t.name),.9],r=function(e){let[t,n,a,i=1]=e;return .299*Math.round((t/255*i+ +(1-i))*255)+.587*Math.round((n/255*i+ +(1-i))*255)+.114*Math.round((a/255*i+ +(1-i))*255)>186?[0,0,0]:[255,255,255]}(i);return(0,a.jsxs)("div",{className:"event",style:{backgroundColor:S(i)},onClick:e=>{console.log("event clicked",t.id),n(W.startEditEvent(t.id)),e.stopPropagation()},children:[(0,a.jsx)("p",{className:"event-name",style:{color:S(r)},children:t.name}),(0,a.jsx)("p",{children:t.description})]})},ea=e=>{let{day:t}=e,n=(0,s.d4)(e=>F.eventsByDay(e.weekEvents,t)),i=e=>{let t=e.start/1440,n=e.duration/1440;return{top:"".concat(100*t,"%"),height:"".concat(100*n,"%")}},l=r.useRef(null),d=(0,s.wA)();return(0,a.jsx)("div",{className:"day",onMouseDown:e=>{var n,a,i;(null==(n=l.current)?void 0:n.clientHeight)&&d(ee.start(t,null==(a=l.current)?void 0:a.getBoundingClientRect().top,null==(i=l.current)?void 0:i.clientHeight,e.clientY,e.screenY))},children:(0,a.jsxs)("div",{className:"hour-container",ref:l,children:[V()(24).map((e,t)=>(0,a.jsx)("div",{className:"hour",children:(0,a.jsx)("span",{children:e})},t)),n.map((e,t)=>(0,a.jsx)("div",{className:"event-position-container",style:i(e),children:(0,a.jsx)(en,{event:e})},t))]})})};function ei(){let e=(0,s.wA)(),t=(0,s.d4)(et.enabled),n=async()=>{B().then(()=>e(H.reloadFromLocalStorage()))};return(0,a.jsxs)("div",{children:[(0,a.jsx)(L.A,{variant:"gen-ai"}),(0,a.jsxs)(v.A,{direction:"horizontal",size:"l",children:[(0,a.jsx)("h3",{children:"Calandar"}),(0,a.jsx)(R.A,{onChange:()=>e(ee.toggleEnabled()),pressed:t,iconName:"lock-private",pressedIconName:"unlocked",children:"Edit"}),(0,a.jsx)(U.A,{dismissButton:!1,position:"top",size:"small",triggerType:"custom",content:(0,a.jsx)(q.A,{type:"success",children:"Copied to clipboard"}),children:(0,a.jsx)(o.A,{iconName:"copy",onClick:z,children:"Copy Calandar"})}),(0,a.jsx)(U.A,{dismissButton:!1,position:"top",size:"small",triggerType:"custom",content:(0,a.jsx)(q.A,{type:"success",children:"Pasted from clipboard"}),children:(0,a.jsx)(o.A,{iconName:"upload",onClick:n,children:"Paste Calandar"})})]}),(0,a.jsxs)("div",{style:{cursor:t?"crosshair":""},className:"week-container",onMouseMove:t=>{e(ee.move(t.screenY))},onMouseUp:()=>{e(ee.end())},children:[(0,a.jsx)("div",{className:"left-hour-marker",children:V()(24).map(e=>(0,a.jsxs)("div",{className:"hour-marker",children:[e,":00"]},e))}),Object.values(b).map((e,t)=>(0,a.jsx)(ea,{day:e},t))]})]})}n(11299);let er=(0,p.U1)({reducer:{weekEvents:_,editEvent:P,dragCreateEvent:$}});function es(){return(0,r.useEffect)(()=>{(0,i.pW)(i.Vd.Compact),w().forEach(e=>{er.dispatch(H.upsertEvent(e))})},[]),(0,a.jsx)(s.Kq,{store:er,children:(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{}),(0,a.jsx)(ei,{})]})})}},95946:(e,t,n)=>{Promise.resolve().then(n.bind(n,80527))}},e=>{var t=t=>e(e.s=t);e.O(0,[936,13,145,984,634,797,441,684,358],()=>t(95946)),_N_E=e.O()}]);